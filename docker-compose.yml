version: '2'
services:

    instance1-stategraems:
      image: fikipollo/stategraems
      container_name: instance1-stategraems
      environment:
        - EMS_ADMIN_USER=emsadminuser@email.com
        - EMS_ADMIN_PASSWORD=admin
        - MYSQL_ROOT_USER=root
        - MYSQL_ROOT_PASSWORD=supersecret
        - MYSQL_DATABASE_NAME=STATegraDB
        - MYSQL_HOST=stategraems-mysql
        - MYSQL_EMS_USER=emsuser
        - MYSQL_EMS_PASS=superdupersecret
      links:
        - instance1-stategraems-mysql:stategraems-mysql
      depends_on:
        - instance1-stategraems-mysql
      volumes_from:
        - instance1-stategraems-data
      ports:
        - "8080:8080"

    instance1-stategraems-mysql:
      image: mysql
      container_name: instance1-stategraems-mysql
      environment:
        - MYSQL_ROOT_PASSWORD=supersecret
      depends_on:
        - instance1-stategraems-data
      volumes_from:
        - instance1-stategraems-data

    instance1-stategraems-data:
      image: busybox
      container_name: instance1-stategraems-data
      volumes:
        - /home/foo/instance1/var/lib/mysql:/var/lib/mysql
        - /home/foo/instance1/data:/data
